{% extends 'base.html' %}

{% block content %}
<div class="container mt-4">
    <h2>Edit Tip: {{ tip.title }}</h2>

    {% if messages %}
        <div class="alert-container">
            {% for message in messages %}
                <div class="alert alert-{{ message.tags }}" role="alert">
                    {{ message }}
                </div>
            {% endfor %}
        </div>
    {% endif %}

    <form method="post">
        {% csrf_token %}

        <!-- Title -->
        <div class="form-group">
            <label for="id_title">Title</label>
            <input type="text" id="id_title" name="title" class="form-control {% if form.title.errors %}is-invalid{% endif %}" value="{{ tip.title }}" required />
            {% if form.title.errors %}
                <div class="invalid-feedback">
                    {% for error in form.title.errors %}
                        <p>{{ error }}</p>
                    {% endfor %}
                </div>
            {% endif %}
        </div>

        <!-- Content -->
        <div class="form-group">
            <label for="id_content">Content</label>
            <textarea id="id_content" name="content" class="form-control {% if form.content.errors %}is-invalid{% endif %}" rows="5" required>{{ form.content.value }}</textarea>
            {% if form.content.errors %}
                <div class="invalid-feedback">
                    {% for error in form.content.errors %}
                        <p>{{ error }}</p>
                    {% endfor %}
                </div>
            {% endif %}
        </div>

        <!-- Categories -->
        <div class="form-group">
            <label for="id_categories">Categories</label>
            <div>
                {% for category in categories %}
                    <label class="mr-2">
                        <input type="checkbox" name="categories" value="{{ category.id }}" {% if category in form.categories.value %}checked{% endif %} />
                        {{ category.name }}
                    </label>
                {% endfor %}
            </div>
        </div>

        <div class="form-group">
            <label for="id_tags">Tags (comma separated)</label>
            <input type="text" id="id_tags" name="tags" class="form-control {% if form.tags.errors %}is-invalid{% endif %}" value="{{ form.tags.value }}" />
            {% if form.tags.errors %}
                <div class="invalid-feedback">
                    {% for error in form.tags.errors %}
                        <p>{{ error }}</p>
                    {% endfor %}
                </div>
            {% endif %}
        </div>

        <button type="submit" class="btn btn-primary">Update Tip</button>
    </form>
</div>
{% endblock %}
